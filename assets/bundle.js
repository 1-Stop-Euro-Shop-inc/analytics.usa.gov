/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./js/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./js/index.js":
/*!*********************!*\
  !*** ./js/index.js ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lib_exceptions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/exceptions */ \"./js/lib/exceptions.js\");\n/* harmony import */ var _lib_consoleprint__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/consoleprint */ \"./js/lib/consoleprint.js\");\n/* harmony import */ var _lib_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/helpers */ \"./js/lib/helpers.js\");\n // import barChart from './lib/barchart';\n// import * as timeSeries from './lib/timeseries';\n\n\n // common parsing and formatting functions\n\nvar TRANSITION_DURATION = 500;\n/*\n   * Define block renderers for each of the different data types.\n   */\n\nvar BLOCKS = {\n  // the realtime block is just `data.totals.active_visitors` formatted with commas\n  realtime: renderBlock().render(function (selection, data) {\n    var totals = data.data[0];\n    selection.text(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatCommas(+totals.active_visitors));\n  }),\n  today: renderBlock().transform(function (data) {\n    return data;\n  }).render(function (svg, data) {\n    var days = data.data;\n    days.forEach(function (d) {\n      d.visits = +d.visits;\n    });\n\n    var y = function y(d) {\n      return d.visits;\n    };\n\n    var series = timeSeries().series([data.data]).y(y).label(function (d) {\n      return _lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatHour(d.hour);\n    }).title(function (d) {\n      return \"\".concat(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatCommas(d.visits), \" visits during the hour of \").concat(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatHour(d.hour), \"m\");\n    });\n    series.xScale().domain(d3.range(0, days.length + 1));\n    series.yScale().domain([0, d3.max(days, y)]);\n    series.yAxis().tickFormat(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatVisits);\n    svg.call(series);\n  }),\n  // the OS block is a stack layout\n  os: renderBlock().transform(function (d) {\n    var values = _lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].listify(d.totals.os);\n    var total = d3.sum(values.map(function (d) {\n      return d.value;\n    }));\n    return addShares(collapseOther(values, total * 0.01));\n  }).render(barChart().value(function (d) {\n    return d.share * 100;\n  }).format(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatPercent)),\n  // the windows block is a stack layout\n  windows: renderBlock().transform(function (d) {\n    var values = _lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].listify(d.totals.os_version);\n    var total = d3.sum(values.map(function (d) {\n      return d.value;\n    }));\n    return addShares(collapseOther(values, total * 0.001)); // % of Windows\n  }).render(barChart().value(function (d) {\n    return d.share * 100;\n  }).format(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatPercent)),\n  // the devices block is a stack layout\n  devices: renderBlock().transform(function (d) {\n    var devices = _lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].listify(d.totals.devices);\n    return addShares(devices);\n  }).render(barChart().value(function (d) {\n    return d.share * 100;\n  }).format(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatPercent)).on('render', function (selection, data) {\n    /*\n       * XXX this is an optimization. Rather than loading\n       * users.json, we total up the device numbers to get the \"big\n       * number\", saving us an extra XHR load.\n       */\n    var total = d3.sum(data.map(function (d) {\n      return d.value;\n    }));\n    d3.select('#total_visitors').text(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatBigNumber(total));\n  }),\n  // the browsers block is a table\n  browsers: renderBlock().transform(function (d) {\n    var values = _lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].listify(d.totals.browser);\n    var total = d3.sum(values.map(function (d) {\n      return d.value;\n    }));\n    return addShares(collapseOther(values, total * 0.01));\n  }).render(barChart().value(function (d) {\n    return d.share * 100;\n  }).format(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatPercent)),\n  // the IE block is a stack, but with some extra work done to transform the\n  // data beforehand to match the expected object format\n  ie: renderBlock().transform(function (d) {\n    var values = _lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].listify(d.totals.ie_version);\n    var total = d3.sum(values.map(function (d) {\n      return d.value;\n    }));\n    return addShares(collapseOther(values, total * 0.0001)); // % of IE\n  }).render(barChart().value(function (d) {\n    return d.share * 100;\n  }).format(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatPercent)),\n  cities: renderBlock().transform(function (d) {\n    // remove \"(not set) from the data\"\n    var cityList = d.data;\n    var cityListFiltered = cityList.filter(function (c) {\n      return c.city !== '(not set)' && c.city !== 'zz';\n    });\n    cityListFiltered = addShares(cityListFiltered, function (d) {\n      return d.active_visitors;\n    });\n    return cityListFiltered.slice(0, 10);\n  }).render(barChart().value(function (d) {\n    return d.share * 100;\n  }).label(function (d) {\n    return d.city;\n  }).format(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatPercent)),\n  countries: renderBlock().transform(function (d) {\n    var totalVisits = 0;\n    var USVisits = 0;\n    d.data.forEach(function (c) {\n      totalVisits += parseInt(c.active_visitors, 10);\n\n      if (c.country === 'United States') {\n        USVisits = c.active_visitors;\n      }\n    });\n    var international = totalVisits - USVisits;\n    var data = {\n      'United States': USVisits,\n      'International &amp; Territories': international\n    };\n    return addShares(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].listify(data));\n  }).render(barChart().value(function (d) {\n    return d.share * 100;\n  }).format(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatPercent)),\n  international_visits: renderBlock().transform(function (d) {\n    var countries = addShares(d.data, function (d) {\n      return d.active_visitors;\n    });\n    countries = countries.filter(function (c) {\n      return c.country !== 'United States';\n    });\n    return countries.slice(0, 15);\n  }).render(barChart().value(function (d) {\n    return d.share * 100;\n  }).label(function (d) {\n    return d.country;\n  }).format(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatPercent)),\n  'top-downloads': renderBlock().transform(function (d) {\n    return d.data.slice(0, 10);\n  }).render(barChart().value(function (d) {\n    return +d.total_events;\n  }).label(function (d) {\n    return ['<span class=\"name\"><a class=\"top-download-page\" target=\"_blank\" href=http://', d.page, '>', d.page_title, '</a></span> ', '<span class=\"domain\" >', _lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatURL(d.page), '</span> ', '<span class=\"divider\">/</span> ', '<span class=\"filename\"><a class=\"top-download-file\" target=\"_blank\" href=', d.event_label, '>', _lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatFile(d.event_label), '</a></span>'].join('');\n  }).scale(function (values) {\n    return d3.scale.linear().domain([0, 1, d3.max(values)]).rangeRound([0, 1, 100]);\n  }).format(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatCommas)),\n  // the top pages block(s)\n  'top-pages': renderBlock().transform(function (d) {\n    return d.data;\n  }).on('render', function (selection, data) {\n    // turn the labels into links\n    selection.selectAll('.label').each(function (d) {\n      d.text = this.innerText;\n    }).html('').append('a').attr('target', '_blank').attr('href', function (d) {\n      return _lib_exceptions__WEBPACK_IMPORTED_MODULE_0__[\"exceptions\"][d.domain] || \"http://\".concat(d.domain);\n    }).text(function (d) {\n      return _lib_exceptions__WEBPACK_IMPORTED_MODULE_0__[\"titleExceptions\"][d.domain] || d.domain;\n    });\n  }).render(barChart().label(function (d) {\n    return d.domain;\n  }).value(function (d) {\n    return +d.visits;\n  }).scale(function (values) {\n    return d3.scale.linear().domain([0, 1, d3.max(values)]).rangeRound([0, 1, 100]);\n  }).format(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatCommas)),\n  // the top pages block(s)\n  'top-pages-realtime': renderBlock().transform(function (d) {\n    return d.data;\n  }).on('render', function (selection, data) {\n    // turn the labels into links\n    selection.selectAll('.label').each(function (d) {\n      d.text = this.innerText;\n    }).html('').append('a').attr('target', '_blank').attr('title', function (d) {\n      return d.page_title;\n    }).attr('href', function (d) {\n      return _lib_exceptions__WEBPACK_IMPORTED_MODULE_0__[\"exceptions\"][d.page] || \"http://\".concat(d.page);\n    }).text(function (d) {\n      return _lib_exceptions__WEBPACK_IMPORTED_MODULE_0__[\"titleExceptions\"][d.page] || d.page_title;\n    });\n  }).render(barChart().label(function (d) {\n    return d.page_title;\n  }).value(function (d) {\n    return +d.active_visitors;\n  }).scale(function (values) {\n    return d3.scale.linear().domain([0, 1, d3.max(values)]).rangeRound([0, 1, 100]);\n  }).format(_lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatCommas))\n}; // store a promise for each block\n\nvar PROMISES = {};\n/*\n   * Now, initialize all of the blocks by:\n   *\n   * 1. grabbing their data-block attribute\n   * 2. looking up the block id in our `BLOCKS` object, and\n   * 3. if a renderer exists, calling it on the selection\n   */\n\nd3.selectAll('*[data-source]').each(function () {\n  var blockId = this.getAttribute('data-block');\n  var block = BLOCKS[blockId];\n\n  if (!block) {\n    return console.warn('no block registered for: %s', blockId);\n  } // each block's promise is resolved when the block renders\n\n\n  PROMISES[blockId] = Q.Promise(function (resolve, reject) {\n    block.on('render.promise', resolve);\n    block.on('error.promise', reject);\n  });\n  d3.select(this).datum({\n    source: this.getAttribute('data-source'),\n    block: blockId\n  }).call(block);\n}); // nest the windows chart inside the OS chart once they're both rendered\n\nwhenRendered(['os', 'windows'], function () {\n  d3.select('#chart_os').call(nestCharts, function (d) {\n    return d.key === 'Windows';\n  }, d3.select('#chart_windows'));\n}); // nest the IE chart inside the browsers chart once they're both rendered\n\nwhenRendered(['browsers', 'ie'], function () {\n  d3.select('#chart_browsers').call(nestCharts, function (d) {\n    return d.key === 'Internet Explorer';\n  }, d3.select('#chart_ie'));\n}); // nest the international countries chart inside the \"International\"\n// chart once they're both rendered\n\nwhenRendered(['countries', 'international_visits'], function () {\n  d3.select('#chart_us').call(nestCharts, function (d) {\n    return d.key === 'International &amp; Territories';\n  }, d3.select('#chart_countries'));\n});\n/*\n   * A very primitive, aria-based tab system!\n   */\n\nd3.selectAll(\"*[role='tablist']\").each(function () {\n  // grab all of the tabs and panels\n  var tabs = d3.select(this).selectAll(\"*[role='tab'][href]\").datum(function () {\n    var target = document.getElementById(this.href.split('#').pop());\n    return {\n      selected: this.getAttribute('aria-selected') === 'true',\n      target: target,\n      tab: this\n    };\n  });\n  var panels = d3.select(this.parentNode).selectAll(\"*[role='tabpanel']\"); // when a tab is clicked, update the panels\n\n  tabs.on('click', function (d) {\n    d3.event.preventDefault();\n    tabs.each(function (tab) {\n      tab.selected = false;\n    });\n    d.selected = true;\n    update(); // track in google analytics\n\n    ga('send', 'event', 'Site Navigation', this.href, this.text);\n  }); // update them to start\n\n  update();\n\n  function update() {\n    var selected;\n    tabs.attr('aria-selected', function (tab) {\n      if (tab.selected) selected = tab.target;\n      return tab.selected;\n    });\n    panels.attr('aria-hidden', function (panel) {\n      panel.selected = selected === this;\n      return !panel.selected;\n    }).style('display', function (d) {\n      return d.selected ? null : 'none';\n    });\n  }\n});\n/*\n   * our block renderer is a d3 selection manipulator that does a bunch of\n   * stuff:\n   *\n   * 1. it knows how to get the URL for a block by either looking at the\n   *    `source` key of its bound data _or_ the node's data-source attribute.\n   * 2. it can be configured to transform the loaded data using a function\n   * 3. it has a configurable rendering function that gets called on the first\n   *    child of matching the `.data` selector.\n   * 4. it dispatches events \"loading\", \"load\", \"render\" and \"error\" events to\n   *    notify us of the state of data.\n   *\n   * Example:\n   *\n   * ```js\n   * var block = renderBlock()\n   *   .render(function(selection, data) {\n   *     selection.text(JSON.stringify(data));\n   *   });\n   * d3.select(\"#foo\")\n   *   .call(block);\n   * ```\n   */\n\nfunction renderBlock() {\n  var url = function url(d) {\n    return d && d.source;\n  };\n\n  var transform = Object;\n\n  var renderer = function renderer() {};\n\n  var dispatch = d3.dispatch('loading', 'load', 'error', 'render');\n\n  var block = function block(selection) {\n    selection.each(load).filter(function (d) {\n      d.refresh = +this.getAttribute('data-refresh');\n      return !Number.isNaN(d.refresh) && d.refresh > 0;\n    }).each(function (d) {\n      var that = d3.select(this);\n      d.interval = setInterval(function () {\n        that.each(load);\n      }, d.refresh * 1000);\n    });\n\n    function load(d) {\n      if (d.dataRequest) d.dataRequest.abort();\n      var that = d3.select(this).classed('loading', true).classed('loaded error', false);\n      dispatch.loading(selection, d);\n      var json = url.apply(this, arguments);\n\n      if (!json) {\n        return console.error('no data source found:', this, d);\n      }\n\n      d.dataRequest = d3.json(json, function (error, data) {\n        that.classed('loading', false);\n        if (error) return that.call(onerror, error);\n        that.classed('loaded', true);\n        dispatch.load(selection, data);\n        that.call(render, d.transformedData = transform(data));\n      });\n    }\n  };\n\n  function onerror(selection, request) {\n    var message = request.responseText;\n    selection.classed('error', true).select('.error-message').text(message);\n    dispatch.error(selection, request, message);\n  }\n\n  block.render = function (x) {\n    if (!arguments.length) return renderer;\n    renderer = x;\n    return block;\n  };\n\n  block.url = function (x) {\n    if (!arguments.length) return url;\n    url = d3.functor(x);\n    return block;\n  };\n\n  block.transform = function (x) {\n    if (!arguments.length) return transform;\n    transform = d3.functor(x);\n    return block;\n  };\n\n  function render(selection, data) {\n    // populate meta elements\n    selection.select('.meta-name').text(function (d) {\n      return d.meta.name;\n    });\n    selection.select('.meta-desc').text(function (d) {\n      return d.meta.description;\n    });\n    selection.select('.data').datum(data).call(renderer, data);\n    dispatch.render(selection, data);\n  }\n\n  return d3.rebind(block, dispatch, 'on');\n}\n\nfunction barChart() {\n  var bars = function bars(d) {\n    return d;\n  };\n\n  var value = function value(d) {\n    return d.value;\n  };\n\n  var format = String;\n\n  var label = function label(d) {\n    return d.key;\n  };\n\n  var scale = null;\n\n  var size = function size(n) {\n    return \"\".concat((n || 0).toFixed(1), \"%\");\n  };\n\n  var chart = function chart(selection) {\n    var bin = selection.selectAll('.bin').data(bars);\n    bin.exit().remove();\n    var enter = bin.enter().append('div').attr('class', 'bin');\n    enter.append('div').attr('class', 'label');\n    enter.append('div').attr('class', 'value');\n    enter.append('div').attr('class', 'bar').style('width', '0%');\n    var componentScale = scale ? scale.call(selection, bin.data().map(value)) : null; // console.log(\"scale:\", componentScale ? componentScale.domain() : \"(none)\");\n\n    bin.select('.bar').style('width', componentScale ? function (d) {\n      return size(componentScale(value(d)));\n    } : function (d) {\n      return size(value(d));\n    });\n    bin.select('.label').html(label);\n    bin.select('.value').text(function (d, i) {\n      return format.call(this, value(d), d, i);\n    });\n  };\n\n  chart.bars = function (x) {\n    if (!arguments.length) return bars;\n    bars = d3.functor(x);\n    return chart;\n  };\n\n  chart.label = function (x) {\n    if (!arguments.length) return label;\n    label = d3.functor(x);\n    return chart;\n  };\n\n  chart.value = function (x) {\n    if (!arguments.length) return value;\n    value = d3.functor(x);\n    return chart;\n  };\n\n  chart.format = function (x) {\n    if (!arguments.length) return format;\n    format = d3.functor(x);\n    return chart;\n  };\n\n  chart.scale = function (x) {\n    if (!arguments.length) return scale;\n    scale = d3.functor(x);\n    return chart;\n  };\n\n  return chart;\n}\n\nfunction timeSeries() {\n  var series = function series(d) {\n    return [d];\n  };\n\n  var bars = function bars(d) {\n    return d;\n  };\n\n  var width = 700;\n  var height = 150;\n  var padding = 50;\n  var margin = {\n    top: 10,\n    right: padding,\n    bottom: 25,\n    left: padding\n  };\n\n  var x = function x(d, i) {\n    return i;\n  };\n\n  var y = function y(d, i) {\n    return d;\n  };\n\n  var label = function label(d, i) {\n    return i;\n  };\n\n  var title = function title(d) {\n    return d;\n  };\n\n  var xScale = d3.scale.ordinal();\n  var yScale = d3.scale.linear();\n  var yAxis = d3.svg.axis().scale(yScale).ticks(5);\n  var innerTickSize = yAxis.innerTickSize();\n  var xAxis;\n  var duration = TRANSITION_DURATION;\n\n  var timeSeries = function timeSeries(svg) {\n    var right = width - margin.right;\n    var bottom = height - margin.bottom;\n    yScale.range([bottom, margin.top]);\n    xScale.rangeRoundBands([margin.left, right], 0, 0);\n    svg.attr('viewBox', [0, 0, width, height].join(' '));\n    element(svg, 'g.axis.y0').attr('transform', \"translate(\".concat([margin.left, 0], \")\")).attr('aria-hidden', 'true').transition().duration(duration).call(yAxis // .innerTickSize(left - right)\n    .orient('left'));\n    element(svg, 'g.axis.y1').attr('transform', \"translate(\".concat([right, 0], \")\")).attr('aria-hidden', 'true').transition().duration(duration).call(yAxis.innerTickSize(innerTickSize).orient('right'));\n    var g = svg.selectAll('.series').data(series);\n    g.exit().remove();\n    g.enter().append('g').attr('class', 'series');\n    var barWidth = xScale.rangeBand();\n    var bar = g.selectAll('.bar').data(bars);\n    bar.exit().remove();\n    var enter = bar.enter().append('g').attr('class', 'bar').attr('tabindex', 0);\n    enter.append('rect').attr('width', barWidth).attr('y', 0).attr('height', 0);\n    enter.append('text').attr('class', 'label');\n    enter.append('title');\n    bar.datum(function (d) {\n      d = d || {};\n      d.x = xScale(d.u = x.apply(this, arguments));\n      d.y0 = yScale(d.v = y.apply(this, arguments));\n      d.y1 = bottom;\n      d.height = d.y1 - d.y0;\n      return d;\n    }).attr('aria-label', title).attr('transform', function (d) {\n      return \"translate(\".concat([d.x, d.y1], \")\");\n    });\n    bar.select('rect').attr('width', barWidth).transition().duration(duration).attr('y', function (d) {\n      return -d.height;\n    }).attr('height', function (d) {\n      return d.height;\n    });\n    bar.select('.label').attr('text-anchor', 'middle') // .attr(\"alignment-baseline\", \"before-edge\")\n    .attr('dy', 10).attr('dx', barWidth / 2).text(label);\n    bar.select('title').text(title);\n  };\n\n  timeSeries.series = function (fs) {\n    if (!arguments.length) return series;\n    series = d3.functor(fs);\n    return timeSeries;\n  };\n\n  timeSeries.bars = function (fb) {\n    if (!arguments.length) return bars;\n    bars = d3.functor(fb);\n    return timeSeries;\n  };\n\n  timeSeries.x = function (fx) {\n    if (!arguments.length) return x;\n    x = d3.functor(fx);\n    return timeSeries;\n  };\n\n  timeSeries.y = function (fy) {\n    if (!arguments.length) return y;\n    y = d3.functor(fy);\n    return timeSeries;\n  };\n\n  timeSeries.xScale = function (xs) {\n    if (!arguments.length) return xScale;\n    xScale = xs;\n    return timeSeries;\n  };\n\n  timeSeries.yScale = function (xs) {\n    if (!arguments.length) return yScale;\n    yScale = xs;\n    return timeSeries;\n  };\n\n  timeSeries.yAxis = function (ya) {\n    if (!arguments.length) return yAxis;\n    yAxis = ya;\n    return timeSeries;\n  };\n\n  timeSeries.label = function (fl) {\n    if (!arguments.length) return label;\n    label = fl;\n    return timeSeries;\n  };\n\n  timeSeries.title = function (ft) {\n    if (!arguments.length) return title;\n    title = ft;\n    return timeSeries;\n  };\n\n  return timeSeries;\n}\n\nfunction element(selection, selector) {\n  var el = selection.select(selector);\n  if (!el.empty()) return el;\n  var bits = selector.split('.');\n  var name = bits[0];\n  var klass = bits.slice(1).join(' ');\n  return selection.append(name).attr('class', klass);\n}\n\nfunction addShares(list, value) {\n  if (!value) value = function value(d) {\n    return d.value;\n  };\n  var total = d3.sum(list.map(value));\n  list.forEach(function (d) {\n    d.share = value(d) / total;\n  });\n  return list;\n}\n\nfunction collapseOther(list, threshold) {\n  var otherPresent = false;\n  var other = {\n    key: 'Other',\n    value: 0,\n    children: []\n  };\n  var last = list.length - 1;\n\n  while (last > 0 && list[last].value < threshold) {\n    other.value += list[last].value;\n    other.children.push(list[last]);\n    list.splice(last, 1);\n    last -= 1;\n  }\n\n  for (var i = 0; i < list.length; i += 1) {\n    if (list[i].key === 'Other') {\n      otherPresent = true;\n      list[i].value += other.value;\n    }\n  }\n\n  if (!otherPresent) {\n    list.push(other);\n  }\n\n  return list;\n}\n\nfunction whenRendered(blockIds, callback) {\n  var promises = blockIds.map(function (id) {\n    return PROMISES[id];\n  });\n  return Q.all(promises).then(callback);\n}\n/*\n   * nested chart helper function:\n   *\n   * 1. finds the selection's `.bin` child with data matching the parentFilter\n   *    function (the \"parent bin\")\n   * 2. determines that bin's share of the total (if `data-scale-to-parent` is \"true\")\n   * 3. grabs all of the child `.bin`s of the child selection and updates their\n   *    share (by multiplying it by the parent's)\n   * 4. updates the `.bar` width  and `.value` text for each child bin\n   * 5. moves the child node into the parent bin\n   */\n\n\nfunction nestCharts(selection, parentFilter, child) {\n  var parent = selection.selectAll('.bin').filter(parentFilter);\n  var scale = child.attr('data-scale-to-parent') === 'true';\n  var bins = child.selectAll('.bin') // If the child data should be scaled to be %'s of its parent bin,\n  // then multiple each child item's % share by its parent's % share.\n  .each(function (d) {\n    if (scale) d.share *= parent.datum().share;\n  }).attr('data-share', function (d) {\n    return d.share;\n  }); // XXX we *could* call the renderer again here, but this works, so...\n\n  bins.select('.bar').style('width', function (d) {\n    return \"\".concat((d.share * 100).toFixed(1), \"%\");\n  });\n  bins.select('.value').text(function (d) {\n    return _lib_helpers__WEBPACK_IMPORTED_MODULE_2__[\"default\"].formatPercent(d.share * 100);\n  });\n  parent.node().appendChild(child.node());\n}\n\nObject(_lib_consoleprint__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(); // Set the dropdown\n\nvar dropDown = document.getElementById('agency-selector'); // Start on change listener to load new page\n\nd3.select(dropDown).on('change', function () {\n  window.location = d3.select(this).property('value');\n});\n\nfor (var j = 0; j < dropDown.options.length; j += 1) {\n  if (dropDown.options[j].value === window.location.pathname) {\n    dropDown.selectedIndex = j;\n    break;\n  }\n}\n\n//# sourceURL=webpack:///./js/index.js?");

/***/ }),

/***/ "./js/lib/consoleprint.js":
/*!********************************!*\
  !*** ./js/lib/consoleprint.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* eslint no-underscore-dangle: \"off\" */\n// friendly console message\n/* harmony default export */ __webpack_exports__[\"default\"] = (function (window) {\n  // plain text for IE\n  if (window._ie) {\n    console.log(\"Hi! Please poke around to your heart's content.\");\n    console.log('');\n    console.log('If you find a bug or something, please report it at https://github.com/GSA/analytics.usa.gov/issues');\n    console.log('Like it, but want a different front-end? The data reporting is its own tool: https://github.com/18f/analytics-reporter');\n    console.log('This is an open source, public domain project, and your contributions are very welcome.');\n  } else {\n    // otherwise, let's get fancy\n    var styles = {\n      big: 'font-size: 24pt; font-weight: bold;',\n      medium: 'font-size: 10pt',\n      medium_bold: 'font-size: 10pt; font-weight: bold',\n      medium_link: 'font-size: 10pt; font-weight: bold; color: #18f'\n    };\n    console.log(\"%cHi! Please poke around to your heart's content.\", styles.big);\n    console.log(' ');\n    console.log('%cIf you find a bug or something, please report it over at %chttps://github.com/GSA/analytics.usa.gov/issues', styles.medium, styles.medium_link);\n    console.log('%cLike it, but want a different front-end? The data reporting is its own tool: %chttps://github.com/18f/analytics-reporter', styles.medium, styles.medium_link);\n    console.log('%cThis is an open source, public domain project, and your contributions are very welcome.', styles.medium);\n  }\n});\n\n//# sourceURL=webpack:///./js/lib/consoleprint.js?");

/***/ }),

/***/ "./js/lib/exceptions.js":
/*!******************************!*\
  !*** ./js/lib/exceptions.js ***!
  \******************************/
/*! exports provided: exceptions, titleExceptions */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"exceptions\", function() { return exceptions; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"titleExceptions\", function() { return titleExceptions; });\n// some hardcoded exceptions for consistently high-traffic\n// infrastructure. we will not add exceptions for any site\n// that happens to have trouble keeping permalinks.\nvar exceptions = {\n  // for the Now tab\n  'applicationmanager.gov/application.aspx': 'https://applicationmanager.gov',\n  'forecast.weather.gov/mapclick.php': 'http://www.weather.gov/',\n  'egov.uscis.gov/casestatus/mycasestatus.do': 'https://egov.uscis.gov/casestatus/',\n  'ebenefits.va.gov/ebenefits-portal/ebenefits.portal': 'https://www.ebenefits.va.gov/ebenefits-portal/ebenefits.portal',\n  'ebenefits.va.gov/ebenefits/homepage': 'https://www.ebenefits.va.gov/ebenefits/homepage',\n  // USPS is afflicted with a bad case of sensitivity :(\n  'm.usps.com/m/trackconfirmaction': 'https://m.usps.com/m/TrackConfirmAction',\n  'tools.usps.com/go/trackconfirmaction_input': 'https://tools.usps.com/go/TrackConfirmAction!input',\n  'm.usps.com/m/home': 'https://m.usps.com/m/Home',\n  'reg.usps.com/entreg/loginaction_input?appurl=https://cns.usps.com/labelinformation.shtml': 'https://reg.usps.com/entreg/LoginAction!input?appurl=https://cns.usps.com/labelinformation.shtml',\n  'tools.usps.com/go/ziplookupaction!input.action': 'https://tools.usps.com/go/ZipLookupAction!input.action',\n  'cns.usps.com/labelinformation.shtml': 'https://cns.usps.com/labelInformation.shtml',\n  // for 7/30 days tabs\n  'egov.uscis.gov': 'https://egov.uscis.gov/casestatus/',\n  'wrh.noaa.gov': 'http://www.wrh.noaa.gov'\n};\nvar titleExceptions = {\n  'forecast.weather.gov/mapclick.php': 'National Weather Service - Forecasts by Region'\n};\n\n//# sourceURL=webpack:///./js/lib/exceptions.js?");

/***/ }),

/***/ "./js/lib/helpers.js":
/*!***************************!*\
  !*** ./js/lib/helpers.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// common parsing and formatting functions\nfunction formatPrefix(suffixes) {\n  var _this = this;\n\n  if (!suffixes) return this.formatCommas;\n  return function (visits) {\n    var prefix = d3.formatPrefix(visits);\n    var suffix = suffixes[prefix.symbol];\n    return prefix && suffix ? prefix.scale(visits).toFixed(suffix[1]).replace(/\\.0+$/, '') + suffix[0] : _this.formatCommas(visits);\n  };\n}\n\nfunction trimZeroes(str) {\n  return str.replace(/\\.0+$/, '');\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  formatCommas: d3.format(','),\n  formatVisits: function formatVisits() {\n    return formatPrefix({\n      k: ['k', 1],\n      // thousands\n      M: ['m', 1],\n      // millions\n      G: ['b', 2] // billions\n\n    });\n  },\n  formatBigNumber: function formatBigNumber() {\n    return formatPrefix({\n      M: [' million', 1],\n      // millions\n      G: [' billion', 2] // billions\n\n    });\n  },\n  formatPercent: function formatPercent(p) {\n    return p >= 0.1 ? \"\".concat(trimZeroes(p.toFixed(1)), \"%\") : '< 0.1%';\n  },\n  formatHour: function formatHour(hour) {\n    var n = +hour;\n    var suffix = n >= 12 ? 'p' : 'a';\n    return (n % 12 || 12) + suffix;\n  },\n  formatURL: function formatURL(url) {\n    var index = 0; // find & remove protocol (http, ftp, etc.) and get domain\n\n    if (url.indexOf('://') > -1) {\n      index = 2;\n    } // find & remove port number\n\n\n    return url.split('/')[index].split(':')[0].replace(new RegExp('%20', 'g'), ' ');\n  },\n  formatFile: function formatFile(url) {\n    var splitUrls = url.split('/');\n    var domain = splitUrls[splitUrls.length - 1];\n    return domain.replace(new RegExp('%20', 'g'), ' ');\n  },\n\n  /*\n   * listify an Object into its key/value pairs (entries) and sorting by\n   * numeric value descending.\n   */\n  listify: function listify(obj) {\n    return d3.entries(obj).sort(function (a, b) {\n      return d3.descending(+a.value, +b.value);\n    });\n  }\n});\n\n//# sourceURL=webpack:///./js/lib/helpers.js?");

/***/ })

/******/ });